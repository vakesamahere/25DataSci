使用数据: data/data_main.csv
数据各列的含义：data/data_main.md

你要用python data_analysis/main.py这个命令运行，时刻保持在根目录

4. 评论特征与票房关系建模
4.1 回归分析：显著性验证
4.1.1 主回归
  - 目的： 验证剧情评论的各项指标与具体票房金额之间的统计显著性关联，并量化其平均影响程度。
  - 方法： 建立多元回归模型。 
    - 因变量： 电影票房金额（可进行对数转换）。
    - 自变量：
      - 核心评论特征： 评论数量、平均情感得分、正面评论百分比、情感得分标准差/两极化指数/情感熵。
      - 控制变量： 上映年份、电影类型（独热编码）、电影制作成本、总评论数量。
    - 模型： 线性回归。
  - 产出： 各自变量的回归系数、p值、置信区间、R2。
4.1.2 稳健性检验（不行就算了）
    - 系统GMM
    - PSM
    - 更换争议力度的衡量方式
4.2 决策树：机制检验
  - 目的： 识别评论特征的关键阈值，揭示它们如何通过非线性规则和交互作用驱动电影进入高票房类别。
  - 数据准备： 将连续的电影票房数据转换为分类目标（例如，每种类型中票房排名前 25% 标记为“高票房”，其余为“较低票房”）。
  - 方法： 训练分类模型。 
    - 因变量： 电影票房类别（“高票房成功”/“较低票房成功”）。
    - 自变量： 核心评论特征（同回归分析的自变量）和重要控制变量。
    - 模型：
      - 决策树：可能不稳健？
      - 随机森林分类器 (Random Forest Classifier)： 推荐使用，用于识别特征重要性、复杂模式，并通过部分依赖图 (Partial Dependence Plots) 可视化阈值效应。
      - 梯度提升机 (GBM，如 XGBoost)： 另一种高性能模型。
  - 产出：
    - 特征重要性排名： 哪些评论特征和控制变量最重要。
    - 决策规则： 模型学习到的“如果...那么...”的分类规则。
    - 混淆矩阵/准确率： 模型分类效果评估。
    - 阈值可视化： 展示特定评论特征达到何种阈值时，电影进入高票房类别的概率显著提升。